metadata={systemName:"com.quoegnt.qopilot.API",displayName:"Quogent Qopilot API",description:"K2 JSSP broker for Quogent Copilot API",configuration:{api_key:{displayName:"API Key",type:"string",value:""},apiURL:{displayName:"URL for Qopilot",type:"string",value:"http://localhost:3000/api"}}},ondescribe=async function({configuration:e}){postSchema({objects:{qopilot:{displayName:"Qopilot",description:"Qopilot File Operations",properties:{file1:{displayName:"File",type:"attachment"},result:{displayName:"Result",type:"string"}},methods:{uploadFile:{displayName:"Upload File",type:"create",inputs:["file1"],outputs:["result"]}}}}})},onexecute=async function({objectName:e,methodName:t,parameters:o,properties:a,configuration:i,schema:s}){switch(e){case"qopilot":await async function(e,t,o,a){switch(e){case"uploadFile":await function(e,t){return new Promise((o,a)=>{try{var i=new FormData;i.append("attributes",JSON.stringify({name:e.file1.filename})),i.append("file",e.file1.content);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState){if(201!==s.status)throw new Error("Failed with status "+JSON.stringify(s.response));postResult({result:"File uploaded successfully"+JSON.stringify(s.response)})}},s.open("POST",t.apiURL+"/testupload"),s.send(i)}catch(e){console.log("Error = "+e),a(e)}})}(o,a);break;default:throw new Error("The method "+e+" is not supported.")}}(t,0,a,i);break;default:throw new Error("The object "+e+" is not supported.")}};
//# sourceMappingURL=qopilot.js.map
